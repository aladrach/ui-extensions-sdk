!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ContentstackUIExtension=t():e.ContentstackUIExtension=t()}(self,(function(){return(()=>{"use strict";var e={713:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(660))&&r.__esModule?r:{default:r},a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content_type=t.data.content_type,this._data=t.data.entry,this.locale=t.data.locale,this._connection=n,this._emitter=r;var o=this;this._emitter.on("entrySave",(function(e){o._data=e.data})),this._emitter.on("entryChange",(function(e){o._changedData=e.data}))}return o(e,[{key:"getData",value:function(){return this._data}},{key:"getField",value:function(e){var t=e.split("."),n=this._data,r=this.content_type.schema;try{var o=!1,a=!1;t.forEach((function(e,i){if(o)a?a=!1:o=!1;else{if(!(r=r.find((function(t){return t.uid===e}))))throw Error("schema not found");if(n=n[e],"group"!==r.data_type&&"global_field"!==r.data_type||!1!==r.multiple||t.length===i+1)if("group"!==r.data_type&&"global_field"!==r.data_type||!0!==r.multiple||t.length===i+1){if("blocks"===r.data_type&&t.length!==i+1){var u=Object.keys(n[t[i+1]])[0];r=r.blocks.find((function(e){return e.uid===u})),t.length===i+2?n=n[t[i+1]]:(n=n[t[i+1]][u],r=r.schema),o=!0,a=!0}}else r=r.schema,n=n[t[i+1]],o=!0;else r=r.schema}}))}catch(e){throw Error("Invalid uid, Field not found")}var u={data:{uid:e,value:n,schema:r,data_type:r.data_type}},s=new i.default(u,this._connection,this._emitter);return delete s.onChange,s}},{key:"onSave",value:function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entrySave",(function(t){e(t.data)}))}},{key:"onChange",value:function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entryChange",(function(t){e(t.data)}))}},{key:"onPublish",value:function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entryPublish",(function(t){e(t.data)}))}},{key:"onUnPublish",value:function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entryUnPublish",(function(t){e(t.data)}))}}]),e}();t.default=a},512:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(372)),i=f(n(660)),a=f(n(445)),u=f(n(943)),s=f(n(713)),c=f(n(351));function f(e){return e&&e.__esModule?e:{default:e}}var d=new(f(n(78)).default),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t;this.postRobot=o.default,this.config=n.data.config,this.currentUser=n.data.user,this.type=n.data.type||"FIELD","FIELD"===this.type&&(this.fieldConfig=n.data.field_config,n.data.self=!0,this.field=new i.default(n,o.default,d)),this.store=new c.default(o.default),"DASHBOARD"!==this.type&&(this.entry=new s.default(n,o.default,d)),"FIELD"!==this.type&&"DASHBOARD"!==this.type||(this.window=new a.default(o.default,this.type,d,n.data.dashboard_width)),this.stack=new u.default(n.data.stack,o.default),o.default.on("extensionEvent",(function(e){"entrySave"===e.data.name&&(d.emitEvent("entrySave",[{data:e.data.data}]),d.emitEvent("updateFields",[{data:e.data.data}])),"entryChange"===e.data.name&&d.emitEvent("entryChange",[{data:e.data.data}]),"entryPublish"===e.data.name&&d.emitEvent("entryPublish",[{data:e.data.data}]),"entryUnPublish"===e.data.name&&d.emitEvent("entryUnPublish",[{data:e.data.data}]),"dashboardResize"===e.data.name&&d.emitEvent("dashboardResize",[{state:e.data.state}]),"extensionFieldChange"===e.data.name&&d.emitEvent("extensionFieldChange",[{data:e.data.data}])}))}return r(e,[{key:"setReady",value:function(){return this.postRobot.sendToParent("ready")}}],[{key:"initialize",value:function(e){return o.default.sendToParent("init",{version:e})}}]),e}();t.default=l},660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=["file","reference","blocks","group","global_field"],o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uid=t.data.uid,this.data_type=t.data.schema.data_type,this.schema=t.data.schema,this._emitter=r;var o,i,a,u,s=(o=this,a=i=t.data.value,u=i,"file"===o.data_type&&(i?(a=i,u=!0===o.schema.multiple?i.map((function(e){return e.uid})):i.uid):!0===o.schema.multiple&&(a=[],u=[])),{resolvedData:a,unResolvedData:u});this._data=s.unResolvedData,this._resolvedData=s.resolvedData,this._connection=n,this._self=t.data.self||!1;var c=this;r.on("updateFields",(function(e){var t=c.uid.split("."),n=e.data;t.forEach((function(e){n&&(n=n[e])})),c._data!==n&&(c._data=n)}))}return n(e,[{key:"setData",value:function(e){var t=this,n=this,o={data:e,uid:n.uid,self:n._self};return n._self||-1===r.indexOf(n.data_type)&&n.data_type?this._connection.sendToParent("setData",o).then((function(){return t._data=e,Promise.resolve(n)})).catch((function(e){return Promise.reject(e)})):Promise.reject(new Error("Cannot call set data for current field type"))}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved,n=void 0!==t&&t;return n?this._resolvedData:this._data}},{key:"setFocus",value:function(){return this._connection.sendToParent("focus")}},{key:"onChange",value:function(e){var t=this;if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("extensionFieldChange",(function(n){t._data=n.data,t._resolvedData=n.data,e(n.data)}))}}]),e}();t.default=o},386:(e,t,n)=>{var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(512)),i=u(n(372)),a=n(147);function u(e){return e&&e.__esModule?e:{default:e}}i.default.CONFIG.LOG_LEVEL="error";var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){var e=this;return this._extension?Promise.resolve(this._extension):o.default.initialize(a.version).then((function(t){return e._extension=new o.default(t),Promise.resolve(e._extension)})).catch((function(e){return Promise.reject(e)}))}},{key:"SDK_VERSION",get:function(){return a.version}}]),e}();t.default=s},433:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},u=(r=n(4))&&r.__esModule?r:{default:r},s=n(653);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={};function d(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function l(e){return Promise.reject(e)}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getReferences=s.getReferences,n.environment=s.environment,c(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"publish",value:function(e){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("publishAsset",e)}},{key:"unpublish",value:function(e){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("unpublishAsset",e)}}],[{key:"Query",value:function(){var e=a(t.__proto__||Object.getPrototypeOf(t),"Query",this).call(this);return Object.assign(e,{language:s.language,environment:s.environment}),e}},{key:"module",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?"Assets":"Asset"}},{key:"getRteAssets",value:function(){return this.connection.sendToParent("stackQuery",{action:"getRteAssets"}).then(d).catch(l)}},{key:"getAssetsOfSpecificTypes",value:function(e){return e&&"string"==typeof e?this.connection.sendToParent("stackQuery",{action:"getAssetsOfSpecificTypes",asset_type:e}).then(d).catch(l):Promise.reject(new Error("Kindly provide valid parameters"))}},{key:"connection",get:function(){return f}}]),t}(u.default);t.default=function(e){return f=e,new Proxy(h,{apply:function(e,t,n){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))))}})}},4:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(15))&&r.__esModule?r:{default:r},u=n(653);function s(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function c(e){return Promise.reject(e)}var f=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("uid is required");this.uid=t,this._query={},this.only=(0,u.transform)("only"),this.except=(0,u.transform)("except"),this.addParam=u.addParam}return i(e,[{key:"update",value:function(e){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("update"+this.constructor.module(),e)}},{key:"delete",value:function(){return this.fetch("delete"+this.constructor.module())}},{key:"fetch",value:function(e,t){var n={payload:t,content_type_uid:this.constructor.contentTypeUid,uid:this.uid,params:this._query,action:e||"get"+this.constructor.module()};return t||delete n.payload,this.constructor.contentTypeUid||delete n.content_type_uid,this.constructor.connection.sendToParent("stackQuery",n).then(s).catch(c)}}],[{key:"Query",value:function(){return new a.default(this.connection,this.module(!0),this.contentTypeUid)}},{key:"create",value:function(e){var t={payload:e,content_type_uid:this.contentTypeUid,action:"create"+this.module()};return this.connection.sendToParent("stackQuery",t).then(s).catch(c)}}]),e}();t.default=f},920:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},u=(r=n(4))&&r.__esModule?r:{default:r},s=n(653);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={},d="",l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._query={},c(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getLanguages",value:function(){return this.fetch("getEntryLanguages")}},{key:"unlocalize",value:function(e){return e&&"string"==typeof e?(this._query.locale=e,this.fetch("unlocalizeEntry")):Promise.reject(new Error("Kindly provide valid parameters"))}},{key:"publish",value:function(e){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query={},this.fetch("publishEntry",e))}},{key:"unpublish",value:function(e){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query={},this.fetch("unpublishEntry",e))}},{key:"setWorkflowStage",value:function(e){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("setWorkflowStageEntry",e)}},{key:"update",value:function(e,t){return!e||"object"!==(void 0===e?"undefined":o(e))||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query.locale=t,this.fetch("updateEntry",e))}}],[{key:"Query",value:function(){var e=a(t.__proto__||Object.getPrototypeOf(t),"Query",this).call(this);return Object.assign(e,{language:s.language,environment:s.environment,includeOwner:s.includeOwner,includeContentType:s.includeContentType,includeSchema:s.includeSchema,includeReference:s.includeReference}),e}},{key:"module",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?"Entries":"Entry"}},{key:"connection",get:function(){return f}},{key:"contentTypeUid",get:function(){return d}}]),t}(u.default);t.default=function(e,t){return f=e,d=t,new Proxy(l,{apply:function(e,t,n){var r=new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))));return Object.assign(r,{getReferences:s.getReferences,addQuery:s.addQuery,language:s.language,environment:s.environment,includeOwner:s.includeOwner,includeContentType:s.includeContentType,includeSchema:s.includeSchema,includeReference:s.includeReference}),r}})}},500:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(920)),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s={},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.Entry=(0,o.default)(n.constructor.connection,n.uid),u(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"connection",get:function(){return s}}]),t}(i.default);t.default=function(e){return s=e,new Proxy(c,{apply:function(e,t,n){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))))}})}},15:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(653));function a(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function u(e){return Promise.reject(e)}var s=function(e){return function(t,n){if(t&&n&&"string"==typeof t&&void 0!==n)return this._query.query[t]=this._query.query.file_size||{},this._query.query[t][e]=n,this;throw Error("Kindly provide valid parameters.")}},c=function(e){var t=e?"$in":"$nin";return function(e,n){if(e&&n&&"string"==typeof e&&Array.isArray(n))return this._query.query[e]=this._query.query[e]||{},this._query.query[e][t]=this._query.query[e][t]||[],this._query.query[e][t]=this._query.query[e][t].concat(n),this;throw Error("Kindly provide valid parameters.")}},f=function(e){return function(t){if(t&&"string"==typeof t)return this._query.query[t]=this._query.query[t]||{},this._query.query[t].$exists=e,this;throw Error("Kindly provide valid parameters.")}},d=function(e){return function(){for(var t=[],n=0,r=arguments.length;n<r;n+=1)arguments[n]instanceof y&&arguments[n]._query.query?t.push(arguments[n]._query.query):"object"===o(arguments[n])&&t.push(arguments[n]);return this._query.query[e]?this._query.query[e]=this._query.query[e].concat(t):this._query.query[e]=t,this}},l=function(e){return function(t){if(t&&"string"==typeof t)return this._query[e]=t,this;throw Error("Argument should be a string.")}},h=function(e){return function(t){if("number"==typeof t)return this._query[e]=t,this;throw Error("Argument should be a number.")}},y=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.module=n,this._connection=t,this._query={},this._query.query=this._query.query||{},this.contentTypeUid=r,this.only=i.transform("only"),this.except=i.transform("except"),this.addQuery=i.addQuery,this.lessThan=s("$lt"),this.lessThanOrEqualTo=s("$lte"),this.greaterThan=s("$gt"),this.greaterThanOrEqualTo=s("$gte"),this.notEqualTo=s("$ne"),this.containedIn=c(!0),this.notContainedIn=c(!1),this.exists=f(!0),this.notExists=f(!1),this.ascending=l("asc"),this.descending=l("desc"),this.beforeUid=l("before_uid"),this.afterUid=l("after_uid"),this.skip=h("skip"),this.limit=h("limit"),this.or=d("$or"),this.and=d("$and"),this.addParam=i.addParam}return r(e,[{key:"equalTo",value:function(e,t){if(e&&"string"==typeof e)return this._query.query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"where",value:function(e,t){if(e&&"string"==typeof e)return this._query.query[e]=t,this;throw Error("Kindly provide valid parameters.")}},{key:"count",value:function(){this._query.count=!0;var e={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",e).then(a).catch(u)}},{key:"query",value:function(e){if("object"===(void 0===e?"undefined":o(e)))return this._query.query=i.mergeDeep(this._query.query,e),this;throw Error("Kindly provide valid parameters")}},{key:"tags",value:function(e){if(Array.isArray(e))return this._query.tags=e,this;throw Error("Kindly provide valid parameters")}},{key:"includeCount",value:function(){return this._query.include_count=!0,this}},{key:"getQuery",value:function(){return this._query.query}},{key:"regex",value:function(e,t,n){if(e&&t&&"string"==typeof e&&"string"==typeof t)return this._query.query[e]={$regex:t},n&&(this._query.query[e].$options=n),this;throw Error("Kindly provide valid parameters.")}},{key:"search",value:function(e){if(e&&"string"==typeof e)return this._query.typeahead=e,this;throw Error("Kindly provide valid parameters.")}},{key:"find",value:function(){var e={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",e).then(a).catch(u)}},{key:"findOne",value:function(){this.singleEntry=!0,this._query.limit=1;var e={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",e).then(a).catch(u)}}]),e}();t.default=y},943:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(433)),i=a(n(500));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function s(e){return Promise.reject(e)}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=n,this._data=t,this.ContentType=(0,i.default)(n),this.Asset=(0,o.default)(n)}return r(e,[{key:"getData",value:function(){return this._data}},{key:"getContentType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return Promise.reject(new Error("uid is required"));var n={uid:e,params:t,action:"getContentType"};return this._connection.sendToParent("stackQuery",n).then(u).catch(s)}},{key:"getContentTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;n.query=e;var r={params:n,action:"getContentTypes"};return this._connection.sendToParent("stackQuery",r).then(u).catch(s)}},{key:"getEnvironment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return Promise.reject(new Error("name is required"));var n={name:e,params:t,action:"getEnvironment"};return this._connection.sendToParent("stackQuery",n).then(u).catch(s)}},{key:"getEnvironments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;n.query=e;var r={params:n,action:"getEnvironments"};return this._connection.sendToParent("stackQuery",r).then(u).catch(s)}},{key:"getLocale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return Promise.reject(new Error("code is required"));var n={code:e,params:t,action:"getLocale"};return this._connection.sendToParent("stackQuery",n).then(u).catch(s)}},{key:"getLocales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;n.query=e;var r={params:n,action:"getLocales"};return this._connection.sendToParent("stackQuery",r).then(u).catch(s)}}]),e}();t.default=c},653:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.transform=function(e){return function(){switch(arguments.length){case 1:if(Array.isArray(arguments[0])||"string"==typeof arguments[0]){var t=this._query[e+"[BASE]"]||[];return t=t.concat(arguments[0]),this._query[e+"[BASE]"]=t,this}throw Error("Kindly provide valid parameters");case 2:if("string"==typeof arguments[0]&&(Array.isArray(arguments[1])||"string"==typeof arguments[1])){var n=this._query[e+"["+arguments[0]+"]"]||[];return n=n.concat(arguments[1]),this._query[e+"["+arguments[0]+"]"]=n,this}throw Error("Kindly provide valid parameters");default:throw Error("Kindly provide valid parameters")}}},t.merge=function(e,t){var n=e;return e&&t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),n},t.mergeDeep=function(e,t){var n=e,r=this;return function e(t,n){var o=t;Object.keys(n).forEach((function(t){"object"===r._type(n[t])&&r._type(o[t])===r._type(n[t])?e(o[t],n[t]):"array"===r._type(n[t])&&r._type(o[t])===r._type(n[t])?o[t]=o[t].concat(n[t]):o[t]=n[t]}))}(n,t),n},t._type=function(e){var t=void 0===e?"undefined":n(e);return"object"===t&&Array.isArray(e)&&(t="array"),t},t.addParam=function(e,t){if(e&&"string"==typeof e&&t&&"string"==typeof t)return this._query[e]=t,this;throw Error("Kindly provide valid parameters.")},t.addQuery=function(e,t){if(e&&t&&"string"==typeof e)return this._query[e]=t,this;throw Error("First argument should be a String.")},t.language=function(e){if(e&&"string"==typeof e)return this._query.locale=e,this;throw Error("Argument should be a String.")},t.environment=function(e){if(e&&"string"==typeof e)return this._query.environment=e,this;throw Error("Argument should be a String.")},t.includeOwner=function(){return this._query.include_owner=!0,this},t.includeContentType=function(){return this._query.include_content_type=!0,this},t.includeSchema=function(){return this._query.include_schema=!0,this},t.includeReference=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t+=1)this._query["include[]"]=this._query["include[]"]||[],this._query["include[]"]=this._query["include[]"].concat(e[t]);else{if("string"!=typeof e)throw Error("Argument should be a String or an Array.");for(var n=0;n<arguments.length;n+=1)this._query["include[]"]=this._query["include[]"]||[],this._query["include[]"]=this._query["include[]"].concat(arguments[n])}return this},t.getReferences=function(){return this.fetch("get"+this.constructor.module()+"References")}},351:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){return Promise.reject(e)}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t}return n(e,[{key:"get",value:function(e){if(!e||"string"!=typeof e)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"get",key:e}).then((function(e){return Promise.resolve(e.data)})).catch(r)}},{key:"getAll",value:function(){return this._connection.sendToParent("store",{action:"getAll"}).then((function(e){var t=e.data,n=void 0===t?{}:t;return Promise.resolve(n)})).catch(r)}},{key:"set",value:function(e,t){if(!e||!t||"string"!=typeof e)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"set",key:e,value:t}).then((function(){return Promise.resolve(!0)})).catch(r)}},{key:"remove",value:function(e){if(!e||"string"!=typeof e)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"remove",key:e}).then((function(){return Promise.resolve(!0)})).catch(r)}},{key:"clear",value:function(){return this._connection.sendToParent("store",{action:"clear"}).then((function(){return Promise.resolve(!0)})).catch(r)}}]),e}();t.default=o},445:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o={attributes:!0,childList:!0,subtree:!0},i=void 0,a=function(){function e(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"half_width";r(this,e),this._connection=t,this._autoResizingEnabled=!1,this._resizingEnabled=!1,this.type=n,this.state=i,this._emitter=o}return n(e,[{key:"enableResizing",value:function(){return"DASHBOARD"!==this.type?Promise.resolve():(this._resizingEnabled=!0,this._connection.sendToParent("window",{action:"enableResizing"}))}},{key:"onDashboardResize",value:function(e){var t=this;if("DASHBOARD"!==this.type)return!1;if(!e||"function"!=typeof e)throw Error("Callback must be a function");return t._emitter.on("dashboardResize",(function(n){t.state=n.state,e(n.state)})),!0}},{key:"updateHeight",value:function(e){if("DASHBOARD"===this.type&&"half_width"===this.state)return Promise.resolve();if(!e||isNaN(e))this._height=Math.ceil(document.documentElement.getBoundingClientRect().height);else{if(this._height===e)return Promise.resolve();this._height=e}return this._connection.sendToParent("resize",this._height)}},{key:"enableAutoResizing",value:function(){return this._autoResizingEnabled||"half_width"===this.state&&"DASHBOARD"===this.type||(this._autoResizingEnabled=!0,(i=new MutationObserver(this.updateHeight.bind(this))).observe(window.document.body,o)),this}},{key:"disableAutoResizing",value:function(){return this._autoResizingEnabled?(this._autoResizingEnabled=!1,i.disconnect(),this):this}}]),e}();t.default=a},263:(e,t,n)=>{e.exports=n(386).default},967:(e,t,n)=>{var r,o,i;e=n.nmd(e);var a,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"undefined"!=typeof self&&self,a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/cross-domain-utils/src/index.js":function(e,t,n){var r=n("./node_modules/cross-domain-utils/src/utils.js");n.d(t,"getActualDomain",(function(){return r.a})),n.d(t,"getAncestor",(function(){return r.b})),n.d(t,"getDomain",(function(){return r.c})),n.d(t,"getUserAgent",(function(){return r.d})),n.d(t,"isActuallySameDomain",(function(){return r.e})),n.d(t,"isAncestor",(function(){return r.f})),n.d(t,"isIframe",(function(){return r.g})),n.d(t,"isPopup",(function(){return r.h})),n.d(t,"isWindow",(function(){return r.i})),n.d(t,"isWindowClosed",(function(){return r.j})),n.d(t,"matchDomain",(function(){return r.k})),n.d(t,"stringifyDomainPattern",(function(){return r.l}));var o=n("./node_modules/cross-domain-utils/src/types.js");n.n(o)},"./node_modules/cross-domain-utils/src/types.js":function(e,t){},"./node_modules/cross-domain-utils/src/utils.js":function(e,t,n){function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.a=f,t.c=d,t.e=l,t.j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==i}if(t&&function(e){if(!l(e))return!1;try{if(e===window)return!0;if(a(e)&&c(e))return!0;if(d(window)===d(e))return!0}catch(e){}return!1}(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var n=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(p,e);if(-1!==n){var r=v[n];if(r&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.body||t.body.contains(e))}(r))return!0}return!1},t.d=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},t.b=m,t.f=function(e,t){var n=m(t);if(n)return n===e;if(t===e)return!1;if(function(e){if(e){try{if(e.top)return e.top}catch(e){}if(u(e)===e)return e;try{if(h(window,e)&&window.top)return window.top}catch(e){}try{if(h(e,window)&&window.top)return window.top}catch(e){}for(var t=0,n=function e(t){for(var n=[],r=0,o=y(t),i=null==o?0:o.length;r<i;r++){var a=o[r];n.push(a);for(var u=0,s=e(a),c=null==s?0:s.length;u<c;u++){var f=s[u];n.push(f)}}return n}(e),r=null==n?0:n.length;t<r;t++){var o=n[t];try{if(o.top)return o.top}catch(e){}if(u(o)===o)return o}}}(t)===t)return!1;for(var r=0,o=y(e),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1},t.h=function(){return Boolean(s(window))},t.g=function(){return Boolean(u(window))},t.k=function e(t,n){if("string"==typeof t){if("string"==typeof n)return t===o.WILDCARD||n===t;if(r(n))return!1;if(Array.isArray(n))return!1}return r(t)?r(n)?t.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(t)):!!Array.isArray(t)&&(Array.isArray(n)?JSON.stringify(t)===JSON.stringify(n):!r(n)&&t.some((function(t){return e(t,n)})))},t.l=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":r(e)?"RegExp("+e.toString():e.toString()},t.i=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===i)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===i)return!0}try{e&&e.__cross_domain_utils_window_check__}catch(e){return!0}return!1};var o={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},i="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.ABOUT_PROTOCOL}function u(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function s(e){if(e&&!u(e))try{return e.opener}catch(e){}}function c(e){try{return e&&e.location&&e.location.href,!0}catch(e){}return!1}function f(e){var t=(e=e||window).location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if(n===o.FILE_PROTOCOL)return o.FILE_PROTOCOL+"//";if(n===o.ABOUT_PROTOCOL){var r=u(e);return r&&c(r)?f(r):o.ABOUT_PROTOCOL+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return n+"//"+i}function d(e){var t=f(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(o.MOCK_PROTOCOL)?e.mockDomain:t}function l(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(a(e)&&c(e))return!0}catch(e){}try{if(f(e)===f(window))return!0}catch(e){}return!1}function h(e,t){if(!e||!t)return!1;var n=u(t);return n?n===e:-1!==function(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}(t).indexOf(e)}function y(e){var t=[],n=void 0;try{n=e.frames}catch(t){n=e}var r=void 0;try{r=n.length}catch(e){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=n[a]}catch(e){return t}if(!u)return t;t.push(u)}return t}var p=[],v=[];function m(e){return s(e=e||window)||u(e)||void 0}},"./src/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.d({},"WeakMap",(function(){return f}));var r={};n.d(r,"cleanUpWindow",(function(){return ne})),n.d(r,"Promise",(function(){return O})),n.d(r,"bridge",(function(){return re})),n.d(r,"init",(function(){return oe})),n.d(r,"parent",(function(){return te})),n.d(r,"send",(function(){return z})),n.d(r,"request",(function(){return B})),n.d(r,"sendToParent",(function(){return Q})),n.d(r,"client",(function(){return Y})),n.d(r,"on",(function(){return $})),n.d(r,"listen",(function(){return Z})),n.d(r,"once",(function(){return V})),n.d(r,"listener",(function(){return X})),n.d(r,"CONFIG",(function(){return h})),n.d(r,"CONSTANTS",(function(){return d})),n.d(r,"disable",(function(){return ee}));var o=n("./node_modules/cross-domain-utils/src/index.js");function i(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}var a,s=Object.defineProperty,c=Date.now()%1e9,f=function(){function e(){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),c+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+c,function(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,t={};return window.Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return e.prototype._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var r=t[n];if(Object(o.isWindow)(r)&&Object(o.isWindowClosed)(r)){if(e)try{e.delete(r)}catch(e){}t.splice(n,1),this.values.splice(n,1),n-=1}}},e.prototype.isSafeToReadWrite=function(e){if(Object(o.isWindow)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0},e.prototype.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,o=e[r];o&&o[0]===e?o[1]=t:s(e,r,{value:[e,t],writable:!0})}else{this._cleanupClosedWindows();var a=this.keys,u=this.values,c=i(a,e);-1===c?(a.push(e),u.push(t)):u[c]=t}},e.prototype.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=i(this.keys,e);if(-1===n)return;return this.values[n]}var r=e[this.name];if(r&&r[0]===e)return r[1]},e.prototype.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,o=i(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))}},e.prototype.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{return t.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];return!(!n||n[0]!==e)}return this._cleanupClosedWindows(),-1!==i(this.keys,e)},e}(),d={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"},l={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},h=(Object.keys(l).map((function(e){return l[e]})),{ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(a={},a[d.SEND_STRATEGIES.POST_MESSAGE]=!0,a[d.SEND_STRATEGIES.BRIDGE]=!0,a[d.SEND_STRATEGIES.GLOBAL]=!0,a),ALLOW_SAME_ORIGIN:!1});0===window.location.href.indexOf(d.FILE_PROTOCOL)&&(h.ALLOW_POSTMESSAGE_POPUP=!0);var y="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var n=e&&e.stack,r=e&&e.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}catch(e){return"Error while stringifying error: "+p(e,t+1)}}var v=function(e){if(!e)return e;var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}};function m(){}function _(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,(function(){return e.charAt(Math.floor(Math.random()*e.length))}))}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n>=100)throw new Error("Self-referential object passed, or object contained too many layers");var r=void 0;if("object"!==(void 0===e?"undefined":y(e))||null===e||Array.isArray(e)){if(!Array.isArray(e))throw new TypeError("Invalid type: "+(void 0===e?"undefined":y(e)));r=[]}else r={};return function(e,t){Array.isArray(e)?function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}(e,t):"object"===(void 0===e?"undefined":y(e))&&null!==e&&function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}(e,t)}(e,(function(e,o){var i=t(e,o);void 0!==i?r[o]=i:"object"===(void 0===e?"undefined":y(e))&&null!==e?r[o]=w(e,t,n+1):r[o]=e})),r}function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function b(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}function E(){var e=void 0;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");e=window}var t=e.__zalgopromise__=e.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}var O=function(){function e(t){var n=this;if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,a=!1,u=!1;try{t((function(e){u?n.resolve(e):(i=!0,r=e)}),(function(e){u?n.reject(e):(a=!0,o=e)}))}catch(e){return void this.reject(e)}u=!0,i?this.resolve(r):a&&this.reject(o)}}return e.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if(b(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.prototype.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(b(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout((function(){t.errorHandled||function(e,t){if(-1===E().dispatchedErrors.indexOf(e)){E().dispatchedErrors.push(e),setTimeout((function(){throw e}),1);for(var n=0;n<E().possiblyUnhandledPromiseHandlers.length;n++)E().possiblyUnhandledPromiseHandlers[n](e,t)}}(e,t)}),1),this.dispatch(),this},e.prototype.asyncReject=function(e){this.errorHandled=!0,this.reject(e)},e.prototype.dispatch=function(){var t=this,n=this.dispatching,r=this.resolved,o=this.rejected,i=this.handlers;if(!n&&(r||o)){this.dispatching=!0,E().activeCount+=1;for(var a=function(n){var a=i[n],u=a.onSuccess,s=a.onError,c=a.promise,f=void 0;if(r)try{f=u?u(t.value):t.value}catch(e){return c.reject(e),"continue"}else if(o){if(!s)return c.reject(t.error),"continue";try{f=s(t.error)}catch(e){return c.reject(e),"continue"}}f instanceof e&&(f.resolved||f.rejected)?(f.resolved?c.resolve(f.value):c.reject(f.error),f.errorHandled=!0):b(f)?f instanceof e&&(f.resolved||f.rejected)?f.resolved?c.resolve(f.value):c.reject(f.error):f.then((function(e){c.resolve(e)}),(function(e){c.reject(e)})):c.resolve(f)},u=0;u<i.length;u++)a(u);i.length=0,this.dispatching=!1,E().activeCount-=1,0===E().activeCount&&e.flushQueue()}},e.prototype.then=function(t,n){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:t,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then((function(n){return e.try(t).then((function(){return n}))}),(function(n){return e.try(t).then((function(){throw n}))}))},e.prototype.timeout=function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout((function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))}),e);return this.then((function(e){return clearTimeout(r),e}))},e.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(t){return t instanceof e?t:b(t)?new e((function(e,n){return t.then(e,n)})):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.all=function(t){var n=new e,r=t.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(i){var a=t[i];if(a instanceof e){if(a.resolved)return o[i]=a.value,r-=1,"continue"}else if(!b(a))return o[i]=a,r-=1,"continue";e.resolve(a).then((function(e){o[i]=e,0==(r-=1)&&n.resolve(o)}),(function(e){n.reject(e)}))},a=0;a<t.length;a++)i(a);return 0===r&&n.resolve(o),n},e.hash=function(t){var n={};return e.all(Object.keys(t).map((function(r){return e.resolve(t[r]).then((function(e){n[r]=e}))}))).then((function(){return n}))},e.map=function(t,n){return e.all(t.map(n))},e.onPossiblyUnhandledException=function(e){return function(e){return E().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){E().possiblyUnhandledPromiseHandlers.splice(E().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}}(e)},e.try=function(t,n,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o=void 0;try{o=t.apply(n,r||[])}catch(t){return e.reject(t)}return e.resolve(o)},e.delay=function(t){return new e((function(e){setTimeout(e,t)}))},e.isPromise=function(t){return!!(t&&t instanceof e)||b(t)},e.flush=function(){var t=new e;return E().flushPromises.push(t),0===E().activeCount&&e.flushQueue(),t},e.flushQueue=function(){var e=E().flushPromises;E().flushPromises=[];for(var t=0,n=null==e?0:e.length;t<n;t++)e[t].resolve()},e}(),S=window[d.WINDOW_PROPS.POSTROBOT]=window[d.WINDOW_PROPS.POSTROBOT]||{};S.registerSelf=function(){};var P="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};S.methods=S.methods||new f;var A=v((function(){S.on(d.POST_MESSAGE_NAMES.METHOD,{origin:d.WILDCARD},(function(e){var t=e.source,n=e.origin,r=e.data,i=S.methods.get(t);if(!i)throw new Error("Could not find any methods this window has privileges to call");var a=i[r.id];if(!a)throw new Error("Could not find method with id: "+r.id);if(!Object(o.matchDomain)(a.domain,n))throw new Error("Method domain "+a.domain+" does not match origin "+n);return O.try((function(){return a.method.apply({source:t,origin:n,data:r},r.args)})).then((function(e){return{result:e,id:r.id,name:r.name}}))}))}));function T(e,t){return"object"===(void 0===e?"undefined":P(e))&&null!==e&&e.__type__===t}function j(e,t,n,r){var o=_(),i=S.methods.get(e);return i||(i={},S.methods.set(e,i)),i[o]={domain:t,method:n},{__type__:d.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function k(e,t,n){function r(){var r=Array.prototype.slice.call(arguments);return S.send(e,d.POST_MESSAGE_NAMES.METHOD,{id:n.__id__,name:n.__name__,args:r},{domain:t,timeout:-1}).then((function(e){return e.data.result}),(function(e){throw e}))}return r.__name__=n.__name__,r.__xdomain__=!0,r.source=e,r.origin=t,r}function R(e,t,n){return new O((function(r,o){return k(e,t,n.__then__)(r,o)}))}function C(e){return S.send(e,d.POST_MESSAGE_NAMES.HELLO,{},{domain:d.WILDCARD,timeout:-1}).then((function(e){return{origin:e.origin}}))}S.readyPromises=S.readyPromises||new f;var L={};L[d.SEND_STRATEGIES.POST_MESSAGE]=function(e,t,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[d.WILDCARD]).map((function(t){if(0===t.indexOf(d.MOCK_PROTOCOL)){if(window.location.protocol===d.FILE_PROTOCOL)return d.WILDCARD;if(!Object(o.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return Object(o.getActualDomain)(e)}return 0===t.indexOf(d.FILE_PROTOCOL)?d.WILDCARD:t})).forEach((function(n){return e.postMessage(t,n)}))};var D,I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function x(e,t,n){return O.try((function(){var r;if(t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=_(),i=Object(o.isPopup)()?d.WINDOW_TYPES.POPUP:Object(o.isIframe)()?d.WINDOW_TYPES.IFRAME:d.WINDOW_TYPES.FULLPAGE,a=Object(o.getDomain)(window);return I({},t,n,{sourceDomain:a,id:t.id||r,windowType:i})}(e,t,{data:function(e,n,r){return w({obj:t.data},(function(t,r){return"function"==typeof t?j(e,n,t,r.toString()):t instanceof Error?(o=t,{__type__:d.SERIALIZATION_TYPES.ERROR,__message__:p(o),__code__:o.code}):window.Promise&&t instanceof window.Promise?function(e,t,n,r){return{__type__:d.SERIALIZATION_TYPES.PROMISE,__then__:j(e,t,(function(e,t){return n.then(e,t)}),r+".then")}}(e,n,t,r.toString()):O.isPromise(t)?function(e,t,n,r){return{__type__:d.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:j(e,t,(function(e,t){return n.then(e,t)}),r+".then")}}(e,n,t,r.toString()):g(t)?(i=t,{__type__:d.SERIALIZATION_TYPES.REGEX,__source__:i.source}):void 0;var o,i})).obj}(e,n),domain:n}),e===window&&!h.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if(Object(o.isWindowClosed)(e))throw new Error("Window is closed");var i=[],a=function(e,t,n){var r=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,null,2);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i}(((r={})[d.WINDOW_PROPS.POSTROBOT]=t,r));return O.map(Object.keys(L),(function(t){return O.try((function(){if(!h.ALLOWED_POST_MESSAGE_METHODS[t])throw new Error("Strategy disallowed: "+t);return L[t](e,a,n)})).then((function(){return i.push(t+": success"),!0}),(function(e){return i.push(t+": "+p(e)+"\n"),!1}))})).then((function(e){var n=e.some(Boolean),r=t.type+" "+t.name+" "+(n?"success":"error")+":\n  - "+i.join("\n  - ")+"\n";if(!n)throw new Error(r)}))}))}function W(e){return S.responseListeners[e]}function q(e){delete S.responseListeners[e]}function M(e){return Boolean(S.erroredResponseListeners[e])}function N(e){var t=e.name,n=e.win,r=e.domain;if(n===d.WILDCARD&&(n=null),r===d.WILDCARD&&(r=null),!t)throw new Error("Name required to get request listener");var i=S.requestListeners[t];if(i)for(var a=0,u=[n,S.WINDOW_WILDCARD],s=null==u?0:u.length;a<s;a++){var c=u[a],f=c&&i.get(c);if(f){if(r&&"string"==typeof r){if(f[r])return f[r];if(f.__domain_regex__)for(var l=0,h=f.__domain_regex__,y=null==h?0:h.length;l<y;l++){var p=h[l],v=p.regex,m=p.listener;if(Object(o.matchDomain)(v,r))return m}}if(f[d.WILDCARD])return f[d.WILDCARD]}}}S.responseListeners=S.responseListeners||{},S.requestListeners=S.requestListeners||{},S.WINDOW_WILDCARD=S.WINDOW_WILDCARD||new function(){},S.erroredResponseListeners=S.erroredResponseListeners||{};var U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G=((D={})[d.POST_MESSAGE_TYPE.ACK]=function(e,t,n){if(!M(n.hash)){var r=W(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}},D[d.POST_MESSAGE_TYPE.REQUEST]=function(e,t,n){var r=N({name:n.name,win:e,domain:t});function i(r){return n.fireAndForget||Object(o.isWindowClosed)(e)?O.resolve():x(e,U({target:n.originalSource,hash:n.hash,name:n.name},r),t)}return O.all([i({type:d.POST_MESSAGE_TYPE.ACK}),O.try((function(){if(!r)throw new Error("No handler found for post message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Request origin "+t+" does not match domain "+r.domain.toString());var i=n.data;return r.handler({source:e,origin:t,data:i})})).then((function(e){return i({type:d.POST_MESSAGE_TYPE.RESPONSE,ack:d.POST_MESSAGE_ACK.SUCCESS,data:e})}),(function(e){var t=p(e).replace(/^Error: /,""),n=e.code;return i({type:d.POST_MESSAGE_TYPE.RESPONSE,ack:d.POST_MESSAGE_ACK.ERROR,error:t,code:n})}))]).then(m).catch((function(e){if(r&&r.handleError)return r.handleError(e);throw e}))},D[d.POST_MESSAGE_TYPE.RESPONSE]=function(e,t,n){if(!M(n.hash)){var r=W(n.hash);if(!r)throw new Error("No handler found for post message response for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+Object(o.stringifyDomainPattern)(r.domain));if(q(n.hash),n.ack===d.POST_MESSAGE_ACK.ERROR){var i=new Error(n.error);return n.code&&(i.code=n.code),r.respond(i,null)}if(n.ack===d.POST_MESSAGE_ACK.SUCCESS){var a=n.data||n.response;return r.respond(null,{source:e,origin:t,data:a})}}},D),K="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};function F(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var t=e.source,n=e.origin,r=function(e){var t,n=void 0;try{t=e,n=JSON.parse(t)}catch(e){return}if(n&&"object"===(void 0===n?"undefined":K(n))&&null!==n&&(n=n[d.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===n?"undefined":K(n))&&null!==n&&n.type&&"string"==typeof n.type&&G[n.type])return n}(e.data);if(r){if(!r.sourceDomain||"string"!=typeof r.sourceDomain)throw new Error("Expected message to have sourceDomain");0!==r.sourceDomain.indexOf(d.MOCK_PROTOCOL)&&0!==r.sourceDomain.indexOf(d.FILE_PROTOCOL)||(n=r.sourceDomain),-1===S.receivedMessages.indexOf(r.id)&&(S.receivedMessages.push(r.id),Object(o.isWindowClosed)(t)&&!r.fireAndForget||(r.data&&(r.data=function(e,t,n){return w({obj:r.data},(function(n){if("object"===(void 0===n?"undefined":P(n))&&null!==n)return T(n,d.SERIALIZATION_TYPES.METHOD)?k(e,t,n):T(n,d.SERIALIZATION_TYPES.ERROR)?function(e,t,n){var r=new Error(n.__message__);return n.__code__&&(r.code=n.__code__),r}(0,0,n):T(n,d.SERIALIZATION_TYPES.PROMISE)?function(e,t,n){return window.Promise?new window.Promise((function(r,o){return k(e,t,n.__then__)(r,o)})):R(e,t,n)}(e,t,n):T(n,d.SERIALIZATION_TYPES.ZALGO_PROMISE)?R(e,t,n):T(n,d.SERIALIZATION_TYPES.REGEX)?function(e,t,n){return new RegExp(n.__source__)}(0,0,n):void 0})).obj}(t,n)),G[r.type](t,n,r)))}}function H(e){try{e.source}catch(e){return}F({source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data})}function B(e){return O.try((function(){if(!e.name)throw new Error("Expected options.name");var t=e.name,n=void 0,r=void 0;if("string"==typeof e.window){var i=document.getElementById(e.window);if(!i)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==i.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!i.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=i.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(n=e.window.contentWindow)}else n=e.window;if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var a=n;r=e.domain||d.WILDCARD;var u=e.name+"_"+_();if(Object(o.isWindowClosed)(a))throw new Error("Target window is closed");var s=!1,c=S.requestPromises.get(a);c||(c=[],S.requestPromises.set(a,c));var f=O.try((function(){if(Object(o.isAncestor)(window,a))return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=S.readyPromises.get(e);return r||(r=new O,S.readyPromises.set(e,r),-1!==t&&setTimeout((function(){return r.reject(new Error(n+" did not load after "+t+"ms"))}),t),r)}(a,e.timeout||h.CHILD_WINDOW_TIMEOUT)})).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(g(r)&&!e)return C(a)})).then((function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(g(r)){if(!Object(o.matchDomain)(r,n))throw new Error("Remote window domain "+n+" does not match regex: "+r.toString());r=n}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var i=r;return new O((function(n,r){var l=void 0;if(e.fireAndForget||function(e,t){S.responseListeners[e]=t}(u,l={name:t,window:a,domain:i,respond:function(e,t){e||(s=!0,c.splice(c.indexOf(f,1))),e?r(e):n(t)}}),x(a,{type:d.POST_MESSAGE_TYPE.REQUEST,hash:u,name:t,data:e.data,fireAndForget:e.fireAndForget},i).catch(r),e.fireAndForget)return n();var y=h.ACK_TIMEOUT,p=e.timeout||h.RES_TIMEOUT,v=100;setTimeout((function n(){if(!s){if(Object(o.isWindowClosed)(a))return l.ack?r(new Error("Window closed for "+t+" before response")):r(new Error("Window closed for "+t+" before ack"));if(y=Math.max(y-v,0),-1!==p&&(p=Math.max(p-v,0)),l.ack){if(-1===p)return;v=Math.min(p,2e3)}else{if(0===y)return r(new Error("No ack for postMessage "+t+" in "+Object(o.getDomain)()+" in "+h.ACK_TIMEOUT+"ms"));if(0===p)return r(new Error("No response for postMessage "+t+" in "+Object(o.getDomain)()+" in "+(e.timeout||h.RES_TIMEOUT)+"ms"))}setTimeout(n,v)}}),v)}))}));return f.catch((function(){!function(e){S.erroredResponseListeners[e]=!0}(u),q(u)})),c.push(f),f}))}function z(e,t,n,r){return(r=r||{}).window=e,r.name=t,r.data=n,B(r)}function Q(e,t,n){var r=Object(o.getAncestor)();return r?z(r,e,t,n):new O((function(e,t){return t(new Error("Window does not have a parent"))}))}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var t=e.window;return{send:function(n,r){return z(t,n,r,e)}}}S.receivedMessages=S.receivedMessages||[],S.receiveMessage=F,S.requestPromises=S.requestPromises||new f,S.send=z;var J="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};function Z(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var t,n=e.name,r=e.window,i=e.domain,a={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:r,domain:i||d.WILDCARD,name:n},u=function e(t,n){var r=t.name,o=t.win,i=t.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],u=0,s=o,c=null==s?0:s.length;u<c;u++){var l=s[u];a.push(e({name:r,domain:i,win:l},n))}return{cancel:function(){for(var e=0,t=null==a?0:a.length;e<t;e++)a[e].cancel()}}}if(Array.isArray(i)){for(var h=[],y=0,p=i,v=null==p?0:p.length;y<v;y++){var m=p[y];h.push(e({name:r,win:o,domain:m},n))}return{cancel:function(){for(var e=0,t=null==h?0:h.length;e<t;e++)h[e].cancel()}}}var _=N({name:r,win:o,domain:i});if(o&&o!==d.WILDCARD||(o=S.WINDOW_WILDCARD),i=i||d.WILDCARD,_)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===S.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===S.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var w=S.requestListeners,b=w[r];b||(b=new f,w[r]=b);var E=b.get(o);E||(E={},b.set(o,E));var O=i.toString(),P=E.__domain_regex__,A=void 0;return g(i)?(P||(P=[],E.__domain_regex__=P),A={regex:i,listener:n},P.push(A)):E[O]=n,{cancel:function(){E&&(delete E[O],o&&0===Object.keys(E).length&&b.delete(o),A&&P.splice(P.indexOf(A,1)))}}}({name:n,win:r,domain:i},a);if(e.once){var s=a.handler;a.handler=v((function(){return u.cancel(),s.apply(this,arguments)}))}if(a.window&&e.errorOnClose)var c=(t=void 0,t=setTimeout((function e(){t=setTimeout(e,50),function(){r&&"object"===(void 0===r?"undefined":J(r))&&Object(o.isWindowClosed)(r)&&(c.cancel(),a.handleError(new Error("Post message target window is closed")))}.call()}),50),{cancel:function(){clearTimeout(t)}});return{cancel:function(){u.cancel()}}}function $(e,t,n){return"function"==typeof t&&(n=t,t={}),(t=t||{}).name=e,t.handler=n||t.handler,Z(t)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof t&&(n=t,t={}),t=t||{},n=n||t.handler;var r=t.errorHandler,o=new O((function(o,i){(t=t||{}).name=e,t.once=!0,t.handler=function(e){if(o(e),n)return n(e)},t.errorHandler=function(e){if(i(e),r)return r(e)}})),i=Z(t);return o.cancel=i.cancel,o}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,n){return $(t,e,n)}}}function ee(){delete window[d.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",H)}S.on=$;var te=Object(o.getAncestor)();function ne(e){var t=S.requestPromises.get(e);if(t)for(var n=0,r=null==t?0:t.length;n<r;n++)t[n].reject(new Error("No response from window - cleaned up"));S.popupWindowsByWin&&S.popupWindowsByWin.delete(e),S.remoteWindows&&S.remoteWindows.delete(e),S.requestPromises.delete(e),S.methods.delete(e),S.readyPromises.delete(e)}var re=null;function oe(){var e,t;S.initialized||(t=H,(e=window).addEventListener?e.addEventListener("message",t):e.attachEvent("onmessage",t),function(){e=function(e){var t=e.source,n=e.origin,r=S.readyPromises.get(t)||new O;r.resolve({origin:n}),S.readyPromises.set(t,r)},S.on(d.POST_MESSAGE_NAMES.HELLO,{domain:d.WILDCARD},(function(t){var n=t.source,r=t.origin;return e({source:n,origin:r})}));var e,t=Object(o.getAncestor)();t&&C(t).catch(m)}(),A({on:$,send:z})),S.initialized=!0}oe(),n.d(t,"cleanUpWindow",(function(){return ne})),n.d(t,"Promise",(function(){return O})),n.d(t,"bridge",(function(){return re})),n.d(t,"init",(function(){return oe})),n.d(t,"parent",(function(){return te})),n.d(t,"send",(function(){return z})),n.d(t,"request",(function(){return B})),n.d(t,"sendToParent",(function(){return Q})),n.d(t,"client",(function(){return Y})),n.d(t,"on",(function(){return $})),n.d(t,"listen",(function(){return Z})),n.d(t,"once",(function(){return V})),n.d(t,"listener",(function(){return X})),n.d(t,"CONFIG",(function(){return h})),n.d(t,"CONSTANTS",(function(){return d})),n.d(t,"disable",(function(){return ee})),t.default=r}})},"object"==u(t)&&"object"==u(e)?e.exports=a():(o=[],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i))},372:(e,t,n)=>{e.exports=n(967),e.exports.default=e.exports},78:(e,t,n)=>{var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){function i(){}var a=i.prototype,u=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}function f(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!==(void 0===e?"undefined":o(e)))&&f(e.listener)}a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},a.addListener=function(e,t){if(!f(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"===(void 0===t?"undefined":o(t));for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},a.on=c("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=c("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&-1!==(n=s(o[r],t))&&o[r].splice(n,1);return this},a.off=c("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,u=e?this.removeListeners:this.addListeners;if("object"!==(void 0===t?"undefined":o(t))||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):u.call(this,r,i));return this},a.removeEvent=function(e){var t,n=void 0===e?"undefined":o(e),r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=c("removeEvent"),a.emitEvent=function(e,t){var n,r,o,i,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=c("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=u,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}({})},147:e=>{e.exports=JSON.parse('{"name":"@contentstack/ui-extensions-sdk","version":"2.2.0","description":"The Extensions SDK allows you to extend Contentstack’s UI by helping you create Custom Fields, Custom Widgets, and Dashboard Widgets.","main":"dist/ui-extension-sdk.js","scripts":{"test":"karma start --single-run --browsers ChromeHeadless karma.conf.js","test-local":"karma start --single-run","generate:docs":"node_modules/.bin/jsdoc --configure .jsdoc.json --verbose","build":"npx webpack"},"keywords":["contentstack","contentstack-ui-extension-sdk","ui-extension-sdk"],"homepage":"https://github.com/contentstack/ui-extensions-sdk","author":"Contentstack <support@contentstack.com> (https://www.contentstack.com/)","bugs":{"url":"https://github.com/contentstack/ui-extensions-sdk/issues","email":"support@contentstack.com"},"repository":{"type":"git","url":"https://github.com/contentstack/ui-extensions-sdk.git"},"license":"MIT","devDependencies":{"@babel/cli":"^7.17.6","babel-eslint":"8.2.3","babel-loader":"7.1.4","babel-preset-env":"1.7.0","braces":"2.3.2","docdash":"1.0.2","eslint":"6.8.0","eslint-config-airbnb":"16.1.0","eslint-loader":"3.0.4","eslint-plugin-import":"2.12.0","inject-loader":"4.0.1","istanbul":"0.4.5","istanbul-instrumenter-loader":"3.0.1","jasmine":"3.3.0","jasmine-core":"2.99.0","jsdoc":"^3.6.10","jsdoc-to-markdown":"^7.1.1","karma":"^6.3.17","karma-chrome-launcher":"2.2.0","karma-coverage":"^2.2.0","karma-coverage-istanbul-reporter":"2.0.1","karma-eslint":"2.2.0","karma-firefox-launcher":"1.1.0","karma-jasmine":"1.1.2","karma-jasmine-html-reporter":"0.2.2","karma-safari-applescript-launcher":"0.1.0","karma-sourcemap-loader":"0.3.7","karma-spec-reporter":"0.0.32","karma-summary-reporter":"1.5.2","karma-webpack":"^5.0.0","nyc":"14.1.1","webpack":"^5.70.0","webpack-cli":"^4.9.2","webpack-dev-server":"^4.7.4","webpack-shell-plugin-next":"^2.2.2"},"dependencies":{"post-robot":"8.0.29","wolfy87-eventemitter":"5.2.4"}}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}return n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(263)})()}));
//# sourceMappingURL=ui-extension-sdk.js.map